<div class="mat-elevation-z8">
  <mat-card>
    <mat-card-header style="text-align: initial;">
      <mat-card-title>Meeting Time period</mat-card-title>
      <mat-card-subtitle
        >Specify the period you will be supervising the students and location, along with
        timeslots</mat-card-subtitle
      >
    </mat-card-header>
    <mat-card-content>
      <form class="form-group">
        <mat-form-field>
          <input
            matInput
            aria-label="From"
            [min]="minDate"
            [matDatepicker]="startPicker"
            placeholder="Choose a starting date"
            required
            (dateChange)="meetingStartDate = $event.value"
          />
          <mat-datepicker-toggle matSuffix [for]="startPicker"></mat-datepicker-toggle>
          <mat-datepicker #startPicker> </mat-datepicker>
        </mat-form-field>

        <mat-form-field>
          <input
            matInput
            aria-label="To"
            [min]="minDate"
            [matDatepicker]="endPicker"
            placeholder="Choose a finishing date"
            required
            (dateChange)="meetingEndDate = $event.value"
          />
          <mat-datepicker-toggle matSuffix [for]="endPicker"></mat-datepicker-toggle>
          <mat-datepicker #endPicker></mat-datepicker>
        </mat-form-field>

        <mat-form-field>
          <input matInput placeholder="Location" #location />
        </mat-form-field>

        <button
          style="width: 80%;"
          mat-raised-button
          color="primary"
          matBadge="{{ getNewTimeslots().length }}"
          matBadgeColor="accent"
          [disabled]="studentNo > getNewTimeslots().length"
          (click)="openDialog(location.value)"
        >
          <mat-icon>schedule</mat-icon>
          Schedule
        </button>
      </form>

      <mat-card *ngIf="studentNo > getNewTimeslots().length"
        ><mat-icon>info</mat-icon>You have {{ studentNo }} students, please create
        {{ studentNo }} slots</mat-card
      >
    </mat-card-content>
  </mat-card>
</div>

<section>
  <!-- <div class="col-md-6 text-right">
    <h3>{{ viewDate | calendarDate: 'weekViewTitle' }}</h3>
  </div> -->

  <ng-template
    class="mat-typography"
    #weekViewHourSegmentTemplate
    let-segment="segment"
    let-locale="locale"
    let-segmentHeight="segmentHeight"
    let-isTimeLabel="isTimeLabel"
  >
    <div
      class="mat-typography"
      #segmentElement
      class="cal-hour-segment"
      [style.height.px]="segmentHeight"
      [class.cal-hour-start]="segment.isStart"
      [class.cal-after-hour-start]="!segment.isStart"
      [ngClass]="segment.cssClass"
      (mousedown)="this.startDragToCreate(segment, $event, segmentElement)"
    >
      <div class="cal-time" *ngIf="isTimeLabel">
        {{ segment.date | calendarDate: 'weekViewHour':locale }}
      </div>
    </div>
  </ng-template>

  <ng-template #loading>
    <div class="text-center">
      <mat-spinner> </mat-spinner> <br />
      Loading events...
    </div>
  </ng-template>

  <div *ngIf="isDataLoaded; else loading">
    <mwl-calendar-week-view
      class="mat-typography"
      [viewDate]="viewDate"
      [events]="events"
      [excludeDays]="[0, 6]"
      [dayStartHour]="8"
      [dayEndHour]="19"
      [hourSegmentTemplate]="weekViewHourSegmentTemplate"
    >
    </mwl-calendar-week-view>
  </div>
</section>
